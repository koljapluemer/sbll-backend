{% extends "cms/base.html" %}
{% block title %}{% if mode == 'edit' %}Edit Situation{% else %}Add Situation{% endif %} | SBLL CMS{% endblock %}
{% block content %}
{{ languages_serialized|json_script:"shared-languages" }}
<h1 class="text-2xl font-semibold mb-4">{% if mode == 'edit' %}Edit situation{% else %}Add situation{% endif %}</h1>
{% if errors %}
<div class="alert alert-error mb-4">
  <ul class="list-disc list-inside">
    {% for error in errors %}<li>{{ error }}</li>{% endfor %}
  </ul>
</div>
{% endif %}
<form method="post" class="space-y-4">
  {% csrf_token %}
  <fieldset class="fieldset">
    <label for="id" class="label">ID</label>
    <input type="text" id="id" name="id" value="{{ data.id }}" class="input input-bordered" {% if mode == 'edit' %}disabled{% endif %} required>
  </fieldset>
  <fieldset class="fieldset">
    <label for="image_link" class="label">Image URL</label>
    <input type="url" id="image_link" name="image_link" value="{{ data.image_link }}" class="input input-bordered" placeholder="https://example.com/image.jpg">
  </fieldset>
  {% include "cms/includes/relation_selector.html" with field_name="glosses" field_label="Glosses" initial=glosses_serialized search_url=gloss_search_url create_url=gloss_create_url initial_id="data-glosses" %}
  {% include "cms/includes/relation_selector.html" with field_name="descriptions" field_label="Descriptions" initial=descriptions_serialized search_url=gloss_search_url create_url=gloss_create_url initial_id="data-descriptions" %}
  <div class="flex gap-2">
    <button type="submit" class="btn btn-primary">Save</button>
    <a href="{% url 'situation_list' %}" class="btn btn-ghost">Cancel</a>
  </div>
</form>
{% endblock %}
