{% extends "cms/base.html" %}
{% block title %}Export Situation Glosses | SBLL CMS{% endblock %}
{% block content %}
<h1 class="text-2xl font-semibold mb-4">Export Situation Glosses</h1>

<div class="card shadow">
  <div class="card-body">
    <p class="mb-4">Select languages and a situation to download all relevant glosses as a JSONL file.</p>

    <form method="post" action="{% url 'situation_export_download' %}" class="space-y-4">
      {% csrf_token %}

      <fieldset class="fieldset">
        <label for="native-language" class="label">Native Language</label>
        <select name="native_language" id="native-language" class="select select-bordered w-full" required>
          <option value="">Select native language</option>
          {% for lang in languages %}
          <option value="{{ lang.iso }}">{{ lang.name }} ({{ lang.iso }})</option>
          {% endfor %}
        </select>
      </fieldset>

      <fieldset class="fieldset">
        <label for="target-language" class="label">Target Language</label>
        <select name="target_language" id="target-language" class="select select-bordered w-full" required>
          <option value="">Select target language</option>
          {% for lang in languages %}
          <option value="{{ lang.iso }}">{{ lang.name }} ({{ lang.iso }})</option>
          {% endfor %}
        </select>
      </fieldset>

      <fieldset class="fieldset">
        <label for="situation" class="label">Situation</label>
        <select name="situation" id="situation" class="select select-bordered w-full" required>
          <option value="">Select situation</option>
          {% for sit in situations %}
          <option value="{{ sit.id }}" {% if sit.id == selected_situation %}selected{% endif %}>{{ sit.id }}</option>
          {% endfor %}
        </select>
      </fieldset>

      <div class="flex gap-2">
        <button type="submit" class="btn btn-primary">Download JSONL</button>
        <a href="{% url 'situation_list' %}" class="btn btn-ghost">Cancel</a>
      </div>
    </form>
  </div>
</div>
{% endblock %}
